// Copyright (c) Microsoft Corporation.
// Licensed under the MIT license.
// TODO: this code is a straight-copy from EventHubs. Need to merge.
import { SpanStatusCode } from "@azure/core-tracing";
/**
 * Runs the `fn` passed in and marks the span as completed with an error (and the
 * corresponding message) or as OK.
 *
 * @hidden
 * @internal
 */
export async function trace(fn, span) {
    try {
        const ret = await fn();
        span.setStatus({ code: SpanStatusCode.OK });
        return ret;
    }
    catch (err) {
        span.setStatus({
            code: SpanStatusCode.ERROR,
            message: err.message,
        });
        throw err;
    }
    finally {
        span.end();
    }
}
//# sourceMappingURL=modelsToBeSharedWithEventHubs.js.map